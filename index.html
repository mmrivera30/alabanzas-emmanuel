<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Alabanzas en Vivo</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
</head>
<body>
  <h1>Alabanzas en Vivo</h1>

  <h2>Agregar Nueva Alabanza</h2>
  <input type="text" id="newTitle" placeholder="TÃ­tulo de la alabanza">
  <br>
  <textarea id="newText" rows="10" cols="50" placeholder="Letra y acordes"></textarea>
  <br>
  <button onclick="addSong()">Agregar Alabanza</button>

  <h2>Seleccionar Alabanza</h2>
  <select id="songList" onchange="selectSong()">
    <option value="">-- Selecciona una alabanza --</option>
  </select>

  <h2>Alabanza Actual</h2>
  <h3 id="currentTitle"></h3>
  <pre id="currentText"></pre>

  <script>
    // ðŸ”§ AquÃ­ debes poner tu configuraciÃ³n real de Firebase
    var firebaseConfig = {
      apiKey: "AIzaSyBJEPsI0xrYHM5YdbeO58IgiJ1ocCg1nBg",
      authDomain: "alabanzasemmanuel2.firebaseapp.com",
      databaseURL: "https://alabanzasemmanuel2-default-rtdb.firebaseio.com/",
      projectId: "alabanzasemmanuel2",
      storageBucket: "alabanzasemmanuel2.firebasestorage.app",
      messagingSenderId: "454013833170",
      appId: "1:454013833170:web:828b4a5179a042332cc20b"
    };

    firebase.initializeApp(firebaseConfig);
    var database = firebase.database();

    function addSong() {
      var title = document.getElementById('newTitle').value;
      var text = document.getElementById('newText').value;
      if (title && text) {
        var songId = title.toLowerCase().replace(/\s+/g, '_');
        database.ref('songs/' + songId).set({
          title: title,
          text: text
        });
        alert('Alabanza agregada exitosamente.');
        document.getElementById('newTitle').value = '';
        document.getElementById('newText').value = '';
        loadSongs();
      } else {
        alert('Por favor, completa ambos campos.');
      }
    }

    function loadSongs() {
      var songList = document.getElementById('songList');
      songList.innerHTML = '<option value="">-- Selecciona una alabanza --</option>';
      database.ref('songs').once('value', function(snapshot) {
        snapshot.forEach(function(childSnapshot) {
          var song = childSnapshot.val();
          var option = document.createElement('option');
          option.value = childSnapshot.key;
          option.text = song.title;
          songList.appendChild(option);
        });
      });
    }

    function selectSong() {
      var songId = document.getElementById('songList').value;
      if (songId) {
        database.ref('songs/' + songId).once('value', function(snapshot) {
          var song = snapshot.val();
          database.ref('currentSong').set({
            title: song.title,
            text: song.text
          });
        });
      }
    }

    function displayCurrentSong() {
      database.ref('currentSong').on('value', function(snapshot) {
        var song = snapshot.val();
        if (song) {
          document.getElementById('currentTitle').innerText = song.title;
          document.getElementById('currentText').innerText = song.text;
        } else {
          document.getElementById('currentTitle').innerText = '';
          document.getElementById('currentText').innerText = '';
        }
      });
    }

    loadSongs();
    displayCurrentSong();
  </script>
</body>
</html>

  </script>
</body>
</html>
